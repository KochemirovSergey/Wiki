# Назначение системы (основные функции)

> **Связь с пользователями:** Функциональность системы разрабатывается с учетом потребностей основных групп пользователей: федеральных министерств и ведомств, научно-исследовательских институтов и университетов, региональных органов управления образованием, образовательных организаций и граждан РФ. Каждая функция направлена на решение конкретных задач различных категорий пользователей.

## Основные потребительские качества

1) **Исключение галлюцинаций в работе [LLM](glossary.md#основные-технологии-искусственного-интеллекта)**
   - Полные онтологии позволяют системе определять недостающие данные
   - Снижение ложных утверждений до 15% (базовый [RAG](glossary.md#технологии-работы-с-данными): 25-30%)
   - Автоматическое указание источников информации в метаданных узлов

2) **Интеллектуальная визуализация данных**
   - Автоматический выбор релевантных аналитических срезов
   - Шаблоны графиков с правилами использования для различных типов данных
   - Региональные карты, временные ряды, сравнительная аналитика

3) **Точность и полнота**
   - Обработка всех возможных источников правильно
   - Поинмание нейросетьют отношений между данными



## **Анализ неструктурированных данных**
   1. Сопоставление данных
      1. Сопоставление исторических документов СССР с современными данными и учет других категорий документов ([см. раздел 2.2.3](#223-параметры-продукта))
      2. Автоматическое распознавание эволюции форм статистической отчетности по временным периодам 2015-2024 годы ([архитектура прототипа в разделе 2.5](#25-имеющийся-у-коллектива-участника-отбора-научно-технический-задел))
      3. Иерархические связи (классы (без овз) + классы (овз) = все классы)
   2. Извлечение количественных данных
      - **NLP-обработка** полных текстов для определения отрывков с количественными данными
      - **OCR для PDF**, веб-парсинг, обработка Word/Excel с объединенными ячейками
      - **LLM-интеграция** с запросом онтологий из БД для определения правильной конфигурации данных
      - Точность извлечения фактов: **92%+** (GraphRAG-Bench)
   3. Автоматическая обработка новых документов и сбор из помеченных телеграмм чатов
      - **Few-shot обучение** - адаптация к новым типам документов с 85%+ точностью при 10-20 примерах
      - Парсинг документов из телеграм-чатов по указанию
      - Обогащение данными из интернета и СМИ
   4. Обработка списков образовательных организаций с уточнением информации запросами в интернет (оценка достоверности)
      - Автоматическая верификация через внешние источники
      - Оценка достоверности информации через сопоставление множественных источников
   
   5. **Обработка опросов населения и независимых отчетов**
      - **NLP-поиск количественных данных** в отчетах ОНФ, социологических исследованиях ВЦИОМ, ФОМ, Левада-центра
      - **Извлечение процентных показателей** удовлетворенности различными аспектами образования
      - **Количественные оценки проблем** - частота упоминаний, рейтинги важности вопросов
      
   > **Для граждан РФ (146 млн потенциальных пользователей):** Возможность участия в опросах через Telegram-бот, поиск образовательных программ по региону и специальности, получение персонализированных рекомендаций на основе анализа рынка труда и обратной связи о том, как их мнение влияет на общую картину образовательной системы.

```mermaid
flowchart LR
PDF --1--> OCR
WEB --1--> webparser
Word --2--> NLP
Excel --2--> схема
webparser --2--> NLP
OCR --2--> NLP
схема --3--> LLM
NLP --3--> LLM
LLM--4--> json
json -- 5 встраивает данные--> БД
БД -- 3 Данные онтологий для определения связей --> LLM
```

         От типа документа зависит пайплайн обработки. Все текстовые документы (кроме таблиц) сначала приводятся к машиночитаемому виду. Далее с помощью алгоритмических методов NLP проводится обработка полных текстов для определения отрывков документа содержащих количественные данные. Далее данные передаются в LLM. LLM запрашивает из БД онтологии соответствующие контексту количественных данных и определяет правильную конфигурации встраивания данных в БД. LLM в ответ возвращает json, который обрабатывается алгоритмическим скриптом для добавления данных в графовую базу данных.

## **Графовая база данных Neo4j**
   1. Полные онтологии (Например, уровни образования или научные степени)
      - **Узлы данных онтологий** определяют параметры для количественных данных
      - Иерархические структуры в соответствии с НПА
      - Автоматическое извлечение и уточнение онтологий из 60,000+ научных статей и 11,000+ НПА
   2. Количественные данные
      - **Количественные узлы** содержат временные ряды и метаданные источников
      - **Узлы индексов** с математическими формулами расчета и методологией
      - Региональная детализация для всех 89 субъектов РФ
      - Обработка запросов к связанным данным в 10-100 раз быстрее реляционных БД

   **Архитектура связей:**
   - Узлы онтологий → Количественные узлы → Индексы → Полный индекс
   - Поддержка GraphRAG для контекстно-зависимых ответов
   - Векторные embedding для поиска похожих сущностей
   
   **Иерархическая структура данных:**
   1. **Федеральная административная иерархия**
      - Федеральный уровень → Федеральные округа → Субъекты РФ → Организации
      - Автоматическое выявление связей "часть-целое" в новых данных
      - Проверка математической консистентности: сумма нижестоящих = вышестоящий уровень
   2. **Образовательные уровни с детализацией**
      - Общее образование → По уровням (дошкольное, начальное, основное, среднее) → По классам → По предметам → По результатам
      - Автоматическая агрегация показателей снизу вверх с контролем целостности
   3. **Высшее профессиональное образование**
      - ВПО → По направлениям подготовки → По профилям → По компетенциям → По трудоустройству
      - Многомерные кубы данных для OLAP-анализа различных срезов
   4. **Метаданные агрегации**
      - Сохранение информации о методологии агрегации на каждом уровне иерархии
      - Отслеживание источников данных для каждого узла
      - Версионирование при изменении структуры иерархии

![Виды данных](_static/grapf_bd_edu.png)

### **Построение полного индекса** (на основе всех количественных данных в БД)
   1. Проверка полноты данных
      - Автоматическое выявление пропусков в временных рядах
      - Валидация через сопоставление федеральных и региональных данных (89 субъектов РФ)
      - Контроль качества через иерархические связи (сумма региональных = федеральное значение)
   2. Макроиндексы
      1. **Наука** - публикационная активность, НИОКР, инновации
      2. **Воспитание** - качество образовательного процесса, педагогические кадры
      3. **Экономика** - финансирование, инфраструура, экономическая эффективность
   3. Автоматическое создание
      1. Обучение на основе существующих индексов (Научные статьи и НПА)
      2. **Методологическое обоснование:** установление граничных значений через педагогические исследования
         - Пример: среднее количество учеников в классе (n<15 – низкая эффективность; 15<n<25 – норма; 25<n – избыток)
      3. **Математические формулы расчета** с описанием методологии для каждого индекса
      4. **Интерпретация количественных данных** через сопоставление с нормативами НПА

```mermaid
graph TD
    subgraph Легенда
        A2(("Количественные </br> узлы")):::quantity
        A3(("Узлы </br> индексов")):::index
        A4(("Полный </br> индекс")):::totalindex
    end

    subgraph Схема
        B1(("Численность </br> преподавателей")):::quantity
        B2(("Численность </br> обучающихся")):::quantity
        B3(("Количество </br> классов")):::quantity
        B4(("__ ")):::quantity
        B5(("__ ")):::quantity
        B6(("__ ")):::quantity
        B7(("__ ")):::quantity
        C1(("Среднее количество </br> учеников на учителя")):::index
        C2(("Среднее количество </br> учеников в классе")):::index
        C3(("__")):::index
        C4(("__")):::index
        C5(("__")):::index
        D1(("Индекс достаточности </br> кадрового обеспечения")):::index
        E1(("Полный </br> индекс")):::totalindex
        B1 --> C1
        B2 --> C1
        B2 --> C2
        B3 --> C2
        B4 --> C3
        B5 --> C3
        B6 --> C3
        B5 --> C4
        B7 --> C4
        C3 --> C5
        C4 --> C5
        C5 --> E1
        C1 --> D1
        C2 --> D1
        D1 --> E1
    end

    classDef ontology fill:#d4b6fa,stroke:#aaa;
    classDef quantity fill:#b6eaff,stroke:#aaa;
    classDef index fill:#c7fddb,stroke:#aaa;
    classDef totalindex fill:#57d17d,stroke:#aaa;
```


### **Прогнозная модель**
   1. **Автоматическое восстановление пропущенных данных**
      - Система самостоятельно выявляет и заполняет пробелы в исторических данных
      - Использует данные похожих регионов/показателей для восстановления недостающей информации
      - Учитывает неопределенность при отсутствии достоверных данных
      - Обеспечивает непрерывность временных рядов для качественного прогнозирования
   
   2. **Согласование разноуровневых данных**
      - Автоматически приводит к согласованности данные федерального и региональных уровней
      - Обеспечивает математическое соответствие: сумма региональных = федеральное значение
      - Устраняет противоречия между различными источниками данных
      - Создает единую иерархическую структуру для всех 89 субъектов РФ
   
   3. **Включение региональных данных в прогнозную модель**
      - **Spatial-temporal modeling** для повышения точности федеральных прогнозов на 15-30%
      - Использование данных по всем 89 субъектам РФ для улучшения качества прогнозов
      - Учет пространственных корреляций и взаимовлияния регионов
      - Агрегация региональных прогнозов до федерального уровня с проверкой консистентности
   
   4. **Использование связанных показателей (внешние регрессоры)**
      - Сопоставление данных из разных источников в единые временные ряды
      - Корреляционный анализ взаимосвязанных показателей образования
      - Учет макроэкономических и демографических факторов
      - Автоматическое создание дополнительных признаков на основе исторических закономерностей
      
   > **Для органов государственного управления:** Министерство просвещения РФ, Министерство науки и высшего образования РФ, Рособрнадзор, аппарат Правительства РФ и 89 региональных департаментов образования используют точные прогнозы для принятия обоснованных решений по распределению бюджетов, планированию образовательной политики и подготовки стратегических документов развития системы образования на 2025-2030 годы.
   
   5. **Комбинированное прогнозирование**
      - Объединение результатов различных алгоритмов для повышения точности на 15-30%
      - Автоматический выбор оптимальной комбинации методов для каждого показателя
      - Учет структурных изменений в образовательной системе
      - Адаптация к различным горизонтам прогнозирования
      
   6. **Прогнозирование контингента (дополнительная проверка через совпадение суммы обучающихся)**
      1. **Направление подготовки** - анализ востребованности специальностей
      2. **Трудоустройство** - прогноз трудоустройства по направлениям и регионам
         - Соответствие работы специальности, динамика за 10 лет
         - Медианные зарплаты по направлениям и регионам
         - Прогноз потребности в кадрах с учетом технологических трендов
      3. **Количество обучающихся** - демографические тренды и миграция
         - Проверка консистентности через математическое соответствие сумм


```mermaid
flowchart TD
    A[Сырые ряды и региональные данные] --"Методы: Интерполяция (линейная, полиномиальная),<br/>Kalman filter, KNN-imputation, Байесовские модели<br/>Инструменты: scikit-learn, statsmodels, PyMC"--> B[Обработка пропущенных значений]
    
    B --"Методы: Bottom-up/Top-down reconciliation,<br/>Padding, Truncation<br/>Инструменты: HierarchicalForecast, Custom padding functions"--> C[Агрегация и нормализация рядов]
    
    C --"Методы: Лаги, средние, сезонность, внешние регрессоры<br/>Инструменты: tsfresh, sktime, FRED API"--> D[Инженерия признаков]
    
    D --"Методы: BSTS (байес. модели), LightGBM, LSTM/NN, ARIMA, Prophet<br/>Инструменты: PyMC, bsts (R), LightGBM, PyTorch, statsmodels"--> E[Обучение моделей]
    
    E --"Методы: Стекинг, взвешенное усреднение, Bayesian Model Averaging (BMA)<br/>Инструменты: scikit-learn, PyMC, XGBoost"--> F[Ансамблирование моделей]
    
    F --"Методы: Time Series Cross-Validation, Bayesian Optimization<br/>Инструменты: sktime, Optuna, scikit-optimize"--> G[Валидация и оптимизация]
    
    G --"Методы: Модельное развертывание, мониторинг<br/>Инструменты: MLflow, Docker, Kubernetes"--> H[Продакшн/Деплой]
    
    H --> I[Реальный прогноз]
```
_______________
Для прогнозной модели используются 3 метода повышения прогноза:
- Сопоставление данных из разных источников в одну серию данных (анализ неструктурированных данных из прошлого раздела функциональных требований)
- Использования связанных показателей (внешние регрессоры)
- Региональные данные (для всех статистических данных есть разбиение федеральных значений на региональные данные, что также можно использовать для повышения точности прогноза)
_______________


## **Поиск количественных данных**
   1. Сверка данных из разных источников
      - **RAG по количественным узлам** для сопоставления эмбеддингов запросов и показателей
      - Формирование контекста из связей между узлами графа
      - Определение пересекающихся численных узлов для всех релевантных онтологий
   2. Построение индекса в соответствии с запросом пользователя
      - Поиск релевантных онтологий через embedding запроса пользователя
      - Запрос внешних связей для выбранных узлов
      - Получение релевантных индексов через граф связей
      - **GraphRAG:** повышение точности ответов на 25-40% vs традиционные подходы
   3. Динамический дашборд
      - **Интеллектуальная визуализация:** автоматический выбор релевантных аналитических срезов
      - Шаблоны графиков с правилами использования для различных типов данных
      - Региональные карты, временные ряды, сравнительная аналитика
      - Алгоритмическое построение и извлечение данных после LLM-анализа
      
   > **Для НИИ и университетов:** Федеральные университеты (КФУ, ТГУ, ВШЭ, МГППУ, РАНХиГС) и федеральные НИИ (РАО, ИРПО, ФИПИ, ФИОКО, ВНИИ труда и другие) используют GraphRAG для проведения масштабных исследований эффективности образовательных программ, получения детализированной аналитики по каждому вузу и построения корреляционных моделей с минимизацией галлюцинаций до 15%.

```mermaid
graph TD
    %% Начало процесса
    USER_QUERY[Запрос пользователя]

    %% Параллельная обработка
    EMBEDDING[embedding]
    ONTOLOGY_QUERY[Запрос релевантных<br/>онтологий]

    %% RAG процесс
    RAG[RAG по количественным<br/>узлам]

    %% Обработка онтологий
    RELEVANT_NODES[Выбор релевантных<br/>узлов]
    EXTERNAL_LINKS[Запрос внешних связей<br/>для выбранных узлов]

    %% Поиск недостающих данных
    MISSING_NODES[Определение<br/>пересекающихся<br/>численных узлов для<br/>всех онтологий]

    %% Боковая проверка
    PARENT_CHILD_QUERY[Запрос узлов онтологий<br/>дочерних и<br/>родительских<br/>до ближайшего,<br/>который будет<br/>содержать<br/>количественные данные]

    %% Получение индексов
    INDEX_RETRIEVAL[Получение через связи<br/>релевантных индексов]

    %% Финальная генерация
    ANSWER_GENERATION[Генерация ответа]

    %% Связи
    USER_QUERY --> EMBEDDING
    USER_QUERY --> ONTOLOGY_QUERY

    EMBEDDING --> RAG
    ONTOLOGY_QUERY --> RELEVANT_NODES

    RELEVANT_NODES --> EXTERNAL_LINKS
    EXTERNAL_LINKS --> MISSING_NODES

    MISSING_NODES --> |Узлы не найдены| PARENT_CHILD_QUERY
    PARENT_CHILD_QUERY --> EXTERNAL_LINKS

    RAG --> INDEX_RETRIEVAL
    MISSING_NODES --> ANSWER_GENERATION

    INDEX_RETRIEVAL --> ANSWER_GENERATION
```


   **Контроль качества данных:**
   1. **Автоматическое выявление аномалий и выбросов**
      - Статистический анализ для обнаружения резких изменений показателей
      - Выявление несоответствий региональных данных федеральным трендам
      - Обнаружение противоречий между связанными показателями
      - Идентификация подозрительно "идеальных" данных
   2. **Кросс-валидация данных из разных источников**
      - Сопоставление данных Росстата с ведомственной статистикой
      - Проверка соответствия данных сайтов организаций официальным отчетам
      - Сравнение субъективных оценок опросов с объективными показателями
      - Валидация через сопоставление множественных независимых источников
   3. **Контроль полноты данных**  
      - Отслеживание полноты заполнения обязательных показателей по всем 89 регионам
      - Автоматические уведомления о критических пропусках в данных
      - Мониторинг своевременности поступления отчетности
   4. **Версионирование исторических данных**
      - Сохранение всех версий данных с метками времени изменения
      - Отслеживание источника каждого изменения (автоматическое/ручное/импорт)
      - Возможность восстановления данных на любую историческую дату
      - Аудит-лог операций с указанием пользователя и причины изменения

**Исключение галлюцинаций в работе llm**

*Пример (нетривиальный). В БД находится информация только о студентах, но не содержит информацию о школах, СПО и ДПО. На запрос пользователя о численности обучающихся llm использует данные из БД для ответа, не уточняя отсутствующие данные.*

Наличие полных онтологий в соответствии с НПА (например, иерархия и связи уровней образования) позволяет llm не только предоставить данные из БД в точной формулировке, но и определить недостающие данные в соответствии с запросом пользователя.


   **Исключение галлюцинаций:**
   - Полные онтологии позволяют LLM определять недостающие данные
   - Снижение ложных утверждений до 15% (базовый RAG: 25-30%)
   - Автоматическое указание источников информации в метаданных узлов

## **Анализ и рекомендации**
   1. Оценка предлагаемых проектов
      - NLP извлечение целевых показателей → поиск в БД через GraphRAG → пересчет индексов
      - Критерии: влияние на показатели, соответствие НПА, экономическая эффективность
      - **Моделирование каскадных эффектов:** влияние изменений на смежные показатели образовательной системы
      - **Многоуровневые взаимосвязи:**
        - Финансирование → качество материальной базы → результаты обучения
        - Квалификация педагогов → методы обучения → достижения учащихся  
        - Демографические изменения → нагрузка на систему → качество образования
        - Цифровизация → изменения педагогических технологий → новые компетенции
      - **Временные лаги эффектов:**
        - Немедленные (до 1 года): изменения контингента, кадровые перестановки
        - Краткосрочные (1-3 года): влияние на результаты ГИА, поступление в вузы
        - Среднесрочные (3-7 лет): изменения в трудоустройстве, карьерных траекториях  
        - Долгосрочные (7-15 лет): влияние на инновационный потенциал регионов
   2. Сценарии "что-если"
      - Временные горизонты: 1-2 года, 3-5 лет, до 10 лет (MAPE <8-20%)
      - Факторы: демография, технологии, экономика, НПА
      - Пространственно-временное моделирование (89 регионов)
   3. Перечень возможных решений
      - Справочник: НПА + 60,000+ научных статей + практические кейсы
      - NLP классификация решений, ранжирование эффективности
   4. Оценка рынка образования
      - **Анализ трудоустройства:** показатели по направлениям/регионам, динамика 10 лет
      - **Зарплатная аналитика:** медианные зарплаты, рост в первые годы
      - **Прогноз кадров:** 1-2 года, 3-5 лет, до 10 лет с учетом технологий
   5. Конкурентный анализ - векторное сравнение организаций и их параметров(образовательные программы, структурные подразделения, контингент обучающихся и преподавателей, финансовая отчетность) через GraphRAG
   6. Контрповестка - автогенерация опровержений для негатива в соцсетях с аргументацией на основе статистичеких данных
   
   > **Для вузов и образовательных организаций:** Частные университеты, EdTech стартапы, платформы онлайн-образования, консалтинговые компании и разработчики образовательного контента используют систему для конкурентного анализа, прогнозирования популярных программ, анализа трудоустройства выпускников по специальностям, планирования новых образовательных программ и оценки их востребованности на рынке труда для повышения конкурентоспособности.
